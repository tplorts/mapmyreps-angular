<button (click)="selectForLocation()">Use my location</button>

<svg [attr.width]="width" [attr.height]="height">
  <g class="states">
    <svg:path
      *ngFor="let state of stateFeatures"
      class="state-path"
      [ngClass]="{ 'selected': isSelected(state) }"
      [attr.d]="state.pathData"
      [matTooltip]="state.name"
      (click)="selectState(state)"
    ></svg:path>
  </g>
  <svg:path class="state-borders" [attr.d]="stateBordersPathData"></svg:path>
</svg>

<mat-card class="state-info-card">
  <mat-card-content>
    <h3>{{ selectedStateName || 'No State Selected' }}</h3>
    <div *ngIf="selectedState">
      <div *ngIf="!allReps; else repList" class="inline-waiting-message">
        <mat-spinner [diameter]="20"></mat-spinner>
        <p>still downloading your reps</p>
      </div>
      <ng-template #repList>
        <div>
          <h4>Senators</h4>
          <ul>
            <li *ngFor="let senator of senatorsOfState">
              <span
                [matTooltip]="senator.isVacant ? 'This office is presently vacant' : null"
                matTooltipPosition="right"
              >
                <a href="{{ senator.mainUrl }}"
                   target="_blank"
                >{{ senator.fullName }}</a>
              </span>
              ({{ senator.party }})
              <span *ngIf="senator.leadershipPosition"
                class="senator-leadership-position"
              >
                &mdash;
                {{ senator.leadershipPosition }}
              </span>
            </li>
          </ul>
        </div>
        <div>
          <h4>Representatives</h4>
          <ul>
            <li *ngFor="let rep of representativesOfState"
                class="rep-list-item"
                [ngClass]="{ 'vacant': rep.isVacant }"
            >
              <span
                [matTooltip]="rep.isVacant ? 'This office is presently vacant' : null"
                matTooltipPosition="right"
              >
                {{ rep.district | district }}: 
                <a href="{{ rep.mainUrl }}"
                   target="_blank"
                >{{ rep.fullName }}</a>
                ({{ rep.party }})
                <span *ngIf="hasCommittees(rep)">
                  &mdash;
                  <span *ngFor="let committee of rep.committees; last as isLast">
                    <a href="{{ committee.websiteUrl }}" 
                       target="_blank"
                    >{{ committee.name }}</a><span *ngIf="!isLast">, </span>
                  </span>
                </span>
              </span>
            </li>
          </ul>
        </div>
      </ng-template>
    </div>
  </mat-card-content>
</mat-card>